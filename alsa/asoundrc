pcm.dmixed {
    type asym
        playback.pcm {
            type dmix
            ipc_key 5678293
            ipc_perm 0660
            ipc_gid audio

            slave {
                channels 2 # make 6 or 5.1 channel
                    pcm {
                        format S16_LE # S32_LE
                        rate 48000 # can also be 44100
                        type hw
                        card 0 # your card
                        device 0 # your device
                        subdevice 0 #important?
                    }

                period_size 1024
                buffer_size 8192
            }

            bindings {
                0 0
                1 1
            }
        }
    capture.pcm "hw:0"
}

pcm.dsp0 {
    type plug
    slave.pcm "dmixed"
}

pcm.multi {
    type route;
    slave.pcm {
        type multi;
        slaves.a.pcm "output";
        slaves.b.pcm "loopin";
        slaves.a.channels 2;
        slaves.b.channels 2;
        bindings.0.slave a;
        bindings.0.channel 0;
        bindings.1.slave a;
        bindings.1.channel 1;
        bindings.2.slave b;
        bindings.2.channel 0;
        bindings.3.slave b;
        bindings.3.channel 1;
    }

    ttable.0.0 1;
    ttable.1.1 1;
    ttable.0.2 1;
    ttable.1.3 1;
}

pcm.output {
    type hw
    card Headset
}

pcm.loopin {
    type plug
    slave.pcm "hw:Loopback,1,0"
}

pcm.loopout {
    type plug
    slave.pcm "hw:Loopback,1,0"
}

pcm.!default {
    type plug
    slave.pcm "multi"
    slave.pcm "dmixed"
}

# vim: set ft=alsaconf :
